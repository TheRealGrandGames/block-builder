<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Block Builder</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="favicon.png">
</head>
<body>
    <h1>Block Builder</h1>

    <div class="game-container">
        <!-- Theme Selector Dropdown -->
        <div class="theme-selector-container">
           <label for="theme-select">Music Category:</label>
            <select id="musicCategorySelect" class="action-button music-category-select"
                data-tooltip="Select a category of background music to play.">
                <option value="All">All Music</option>
                <option value="Main Menu">Main Menu</option>
                <option value="Creative">Creative</option>
                <option value="Survival">Survival</option>
                <option value="Underwater">Underwater</option>
                <option value="Nether">Nether</option>
                <option value="Music Discs">Music Discs</option>
            </select>
            
            <label for="theme-select">Theme:</label>
            <select id="theme-select">
                <option value="light">Light Theme</option>
                <option value="dark">Dark Theme</option>
                <option value="overworld">Overworld Theme</option>
                <option value="nether">Nether Theme</option>
                <option value="end">End Theme</option>
                <option value="cave">Cave Theme</option>
                <option value="ocean">Ocean Theme</option>
                <option value="reef">Reef Theme</option>
            </select>
        </div>

        <div class="top-buttons-container">
            <!-- New Minigame Buttons -->
            <a href="timed_game.html" class="action-button">Play Timed Game</a>
            <a href="memory_game.html" class="action-button">Play Memory Game</a>
            
            <button id="musicToggleButton" class="action-button music-toggle-button"
                    data-tooltip="Toggle background music on or off.">Music: ON</button>
            <button id="soundToggleButton" class="action-button sound-toggle-button"
                    data-tooltip="Toggle sound effects on or off.">Sounds: ON</button>
            <button id="gridSoundToggleButton" class="action-button grid-sound-toggle-button"
                    data-tooltip="Toggle sounds for placing and destroying blocks on the grid on or off.">Grid Sounds: ON</button>
        </div>
        
        <div class="instructions">
            <p>**Instructions:**</p>
            <ul>
                <li>Click a block in your inventory to select it.</li>
                <li>**Left-click** on the grid to place the selected block.</li>
                <li>**Right-click** on a block to destroy it.</li>
                <li>**Middle-click** on a block on the grid to select it.</li>
                <li>Click on category headers in the inventory to expand/collapse.</li>
            </ul>
        </div>

        <div class="inventory">
            <h2>Inventory</h2>
            <div id="blockInventory" class="block-items">
            </div>
        </div>

        <div class="selected-block-area">
            <h3>Currently Selected:</h3>
            <div id="selectedBlockDisplay" class="selected-block-visual"></div>
        </div>

        <h2>Actions</h2>
        
        <div class="utility-buttons-container">
            <button id="importButton" class="action-button" data-tooltip="Load a .blockbuilder file.">Import</button>
            <button id="exportButton" class="action-button" data-tooltip="Save your current grid as a .blockbuilder file.">Export</button>
            <div></div>
            <button id="undoButton" class="action-button" data-tooltip="Undo the last action.">Undo</button>
            <button id="redoButton" class="action-button" data-tooltip="Redo the last undone action.">Redo</button>
            <button id="fillGridButton" class="action-button fill-button"
                data-tooltip="Fill the grid with the selected block.">Fill</button>
            <button id="clearGridButton" class="action-button clear-button"
                data-tooltip="Clear the entire grid.">Clear</button>
        </div>
        
        <h2>Grid</h2>

        <div class="grid-size-controls">
            <h3>Grid Dimensions:</h3>
            <label for="gridWidth">Width (X):</label>
            <input type="number" id="gridWidth" min="1" max="35" value="10">
            <label for="gridHeight">Height (Z):</label>
            <input type="number" id="gridHeight" min="1" max="35" value="10">
            <button id="setGridSizeButton" class="action-button"
                data-tooltip="WARNING: THE ENTIRE GRID WILL BE CLEARED">Set Grid Size</button>
            <button id="resetGridSizeButton" class="action-button"
                data-tooltip="Reset grid size to 10x10 (clears grid)">Reset to Default</button>
        </div>
        
        <div id="gameGrid" class="game-grid">
        </div>

        <div class="resource-count-container">
            <h2>Resources Used</h2>
            <div id="resourceCountDisplay" class="resource-items">
                </div>
        </div>

        <h2>Save as .png</h2>
        
        <div class="utility-buttons-container">
            <button id="savePngButton" class="action-button save-button">Save PNG</button>
        </div>
        <div class="checkbox-container">
            <input type="checkbox" id="includeResourcesCheckbox" class="custom-checkbox-input">
            <label for="includeResourcesCheckbox" class="custom-checkbox-label">
                <span class="checkbox-visual"></span>
                Include Resource List in PNG
            </label>
        </div>
    </div>

    <div id="blockTooltip" class="block-tooltip"></div>

    <canvas id="hiddenCanvas" style="display: none;"></canvas>
    <input type="file" id="importFileInput" accept=".blockbuilder" style="display: none;">

    <script src="scripts.js"></script>
</body>
</html>
